<html>
<head>
<script src="taka.json" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">//<![CDATA[
var curr;

function make_link(v) {
    return '<a href="javascript:update(' + v + ')"><img src="svg/' + v + '.svg" width="100" height="100" /></a> ';
}

function update(next) {
    curr = next;
    $("#curr").html(make_link(curr));

    jQuery.ajax({
        type: "GET",
        url: "dict/" + curr + ".json",
        dataType: "json",
        success: function(data) {
            var text = "unicode: " + data['character'] + "<br />";
            if (data['meanings']) {
                text += "meaning: " + data['meanings'].toLowerCase() + "<br />";
            }
            if (data['readings'] && (data['readings']['on'] || data['readings']['kun'])) {
                text += "reading: ";
                if (data['readings']['on']) {
                    text += data['readings']['on'] + " (on) "
                }
                if (data['readings']['kun']) {
                    text += data['readings']['kun'] + " (kun) ";
                }
            }
            $("#dict").html(text);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            $("#dict").text("");
        }
    });

    var next_refs = t[next.toString()];
    var refs_0 = "";
    for (var i = 0; i < next_refs[0].length; i++) {
        refs_0 += make_link(next_refs[0][i]);
    }
    var refs_1 = "";
    for (var i = 0; i < next_refs[1].length; i++) {
        refs_1 += make_link(next_refs[1][i]);
    }
    $("#refs_0").html(refs_0);
    $("#refs_1").html(refs_1);
}

$(function() {
    update(1);
});

//]]></script>
</head>
<body>
  <table width="100%">
    <tr><td id="refs_0" align="center" style="background: #cccccc" height="100px" colspan="2"></td></tr>
    <tr><td id="curr" align="center" style="background: #eeeeee" height="100px" width="50%"></td><td id="dict" height="100px" width="50%"></td></tr>
    <tr><td id="refs_1" align="center" style="background: #cccccc" height="100px" colspan="2"></td></tr>
  </table>
</body>
</html>